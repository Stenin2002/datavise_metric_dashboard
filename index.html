<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Startup Metrics Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
            min-height: 100vh;
            padding: 15px;
            line-height: 1.6;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 35px;
            animation: fadeInDown 0.6s ease-out;
        }

        h1 {
            color: white;
            font-size: 2.8em;
            font-weight: 700;
            text-shadow: 0 4px 12px rgba(0,0,0,0.3);
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .subtitle {
            color: rgba(255,255,255,0.9);
            font-size: 1.1em;
            font-weight: 400;
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 18px;
            margin-bottom: 25px;
            animation: fadeIn 0.8s ease-out;
        }

        .kpi-card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .kpi-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 16px 48px rgba(0,0,0,0.18);
        }

        .kpi-card:hover::before {
            transform: scaleX(1);
        }

        .kpi-label {
            font-size: 0.85em;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            margin-bottom: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .kpi-icon {
            font-size: 1.2em;
        }

        .kpi-value {
            font-size: 2.4em;
            font-weight: 700;
            color: #111827;
            margin-bottom: 8px;
            letter-spacing: -1px;
        }

        .kpi-trend {
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
        }

        .trend-up {
            color: #10b981;
        }

        .trend-down {
            color: #ef4444;
        }

        .trend-neutral {
            color: #f59e0b;
        }

        .health-good {
            color: #10b981;
        }

        .health-warning {
            color: #f59e0b;
        }

        .health-danger {
            color: #ef4444;
        }

        .alert-box {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12);
            animation: fadeIn 1s ease-out;
        }

        .alert-box h2 {
            color: #111827;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e5e7eb;
            font-size: 1.4em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-item {
            padding: 16px 20px;
            margin: 10px 0;
            border-radius: 12px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            transition: transform 0.2s ease;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .alert-item:hover {
            transform: translateX(4px);
        }

        .alert-danger {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            border-left: 5px solid #ef4444;
            color: #991b1b;
        }

        .alert-warning {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 5px solid #f59e0b;
            color: #92400e;
        }

        .alert-success {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border-left: 5px solid #10b981;
            color: #065f46;
        }

        .charts-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
            animation: fadeIn 1s ease-out;
        }

        .chart-card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12);
        }

        .chart-card h2 {
            color: #111827;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e5e7eb;
            font-size: 1.4em;
            font-weight: 600;
        }

        canvas {
            max-height: 300px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 420px;
            gap: 25px;
            margin-bottom: 30px;
        }

        .data-section, .form-section {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12);
            animation: fadeIn 1.2s ease-out;
        }

        h2 {
            color: #111827;
            margin-bottom: 22px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e5e7eb;
            font-size: 1.4em;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #374151;
            font-weight: 600;
            font-size: 0.92em;
        }

        input {
            width: 100%;
            padding: 13px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: #f9fafb;
            font-family: inherit;
        }

        input:focus {
            outline: none;
            border-color: #8b5cf6;
            background: white;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        input:hover:not(:focus) {
            border-color: #d1d5db;
        }

        button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.05em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
            margin-top: 8px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(139, 92, 246, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .table-container {
            overflow-x: auto;
            border-radius: 10px;
            margin-top: 15px;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }

        th {
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
            padding: 14px 16px;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 2px solid #e5e7eb;
            font-size: 0.88em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            white-space: nowrap;
        }

        th:first-child {
            border-top-left-radius: 10px;
        }

        th:last-child {
            border-top-right-radius: 10px;
        }

        td {
            padding: 14px 16px;
            border-bottom: 1px solid #f3f4f6;
            color: #4b5563;
            font-size: 0.95em;
            white-space: nowrap;
        }

        tr:hover td {
            background: #f9fafb;
        }

        tr:last-child td:first-child {
            border-bottom-left-radius: 10px;
        }

        tr:last-child td:last-child {
            border-bottom-right-radius: 10px;
        }

        .delete-btn {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85em;
            width: auto;
            font-weight: 600;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }

        .delete-btn:hover {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .form-section {
                order: -1;
            }

            .kpi-grid {
                grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            }

            .charts-section {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 12px;
            }

            h1 {
                font-size: 2em;
            }

            .subtitle {
                font-size: 0.95em;
            }

            .kpi-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .kpi-card {
                padding: 22px;
            }

            .kpi-value {
                font-size: 2em;
            }

            .alert-box, .data-section, .form-section, .chart-card {
                padding: 20px;
            }

            .table-container {
                font-size: 0.9em;
            }

            th, td {
                padding: 10px 12px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.6em;
            }

            .kpi-value {
                font-size: 1.7em;
            }

            input {
                padding: 11px 14px;
            }

            button {
                padding: 12px;
            }
        }

        .no-data {
            text-align: center;
            padding: 50px 20px;
            color: #9ca3af;
            font-size: 1.05em;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }

        .empty-state-icon {
            font-size: 4em;
            margin-bottom: 15px;
            opacity: 0.3;
        }

        .empty-state-text {
            color: #6b7280;
            font-size: 1.1em;
            margin-bottom: 8px;
        }

        .empty-state-subtext {
            color: #9ca3af;
            font-size: 0.95em;
        }

        .success-message {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            color: #065f46;
            padding: 12px 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: none;
            animation: fadeIn 0.3s ease-out;
            border-left: 4px solid #10b981;
        }

        .success-message.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📊 DataVise</h1>
            <div class="subtitle">Financial Dashboard</div>
        </div>

        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-label"><span class="kpi-icon">💰</span>Total MRR</div>
                <div class="kpi-value" id="totalMRR">$0</div>
                <div class="kpi-trend" id="mrrTrend"></div>
            </div>

            <div class="kpi-card">
                <div class="kpi-label"><span class="kpi-icon">🔥</span>Avg Monthly Burn</div>
                <div class="kpi-value" id="avgBurn">$0</div>
                <div class="kpi-trend" id="burnTrend"></div>
            </div>

            <div class="kpi-card">
                <div class="kpi-label"><span class="kpi-icon">⏰</span>Runway</div>
                <div class="kpi-value" id="runway">0 mo</div>
                <div class="kpi-trend" id="runwayHealth"></div>
            </div>

            <div class="kpi-card">
                <div class="kpi-label"><span class="kpi-icon">📈</span>Customer Growth</div>
                <div class="kpi-value" id="customerGrowth">0%</div>
                <div class="kpi-trend" id="growthTrend"></div>
            </div>

            <div class="kpi-card">
                <div class="kpi-label"><span class="kpi-icon">💵</span>CAC</div>
                <div class="kpi-value" id="cac">$0</div>
                <div class="kpi-trend">Customer Acquisition Cost</div>
            </div>

            <div class="kpi-card">
                <div class="kpi-label"><span class="kpi-icon">📉</span>Churn Rate</div>
                <div class="kpi-value" id="churnRate">0%</div>
                <div class="kpi-trend" id="churnHealth"></div>
            </div>
        </div>

        <div class="alert-box">
            <h2>🎯 Insights & Recommendations</h2>
            <div id="alertsContainer"></div>
        </div>

        <div class="charts-section">
            <div class="chart-card">
                <h2>📊 Revenue & Cash Trend</h2>
                <canvas id="revenueChart"></canvas>
            </div>
            <div class="chart-card">
                <h2>👥 Customer Metrics</h2>
                <canvas id="customerChart"></canvas>
            </div>
        </div>

        <div class="main-content">
            <div class="data-section">
                <h2>📈 Monthly Metrics History</h2>
                <div class="table-container">
                    <table id="metricsTable">
                        <thead>
                            <tr>
                                <th>Period</th>
                                <th>MRR</th>
                                <th>New Customers</th>
                                <th>Churn</th>
                                <th>Expenses</th>
                                <th>Cash Balance</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <tr>
                                <td colspan="7">
                                    <div class="empty-state">
                                        <div class="empty-state-icon">📊</div>
                                        <div class="empty-state-text">No data available yet</div>
                                        <div class="empty-state-subtext">Add your first monthly entry to get started</div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="form-section">
                <h2>➕ Add Monthly Entry</h2>
                <div class="success-message" id="successMessage">
                    Entry added successfully!
                </div>
                <form id="metricsForm">
                    <div class="form-group">
                        <label for="period">Period</label>
                        <input type="text" id="period" placeholder="Jan 2025" required>
                    </div>

                    <div class="form-group">
                        <label for="mrr">Monthly Recurring Revenue ($)</label>
                        <input type="number" id="mrr" placeholder="50000" required min="0" step="0.01">
                    </div>

                    <div class="form-group">
                        <label for="newCustomers">New Customers</label>
                        <input type="number" id="newCustomers" placeholder="15" required min="0">
                    </div>

                    <div class="form-group">
                        <label for="churn">Customer Churn</label>
                        <input type="number" id="churn" placeholder="3" required min="0">
                    </div>

                    <div class="form-group">
                        <label for="expenses">Operating Expenses ($)</label>
                        <input type="number" id="expenses" placeholder="35000" required min="0" step="0.01">
                    </div>

                    <div class="form-group">
                        <label for="cash">Cash Balance ($)</label>
                        <input type="number" id="cash" placeholder="500000" required min="0" step="0.01">
                    </div>

                    <button type="submit">Add Entry</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        let metricsData = [];
        let revenueChart = null;
        let customerChart = null;

        function initializeSampleData() {
            const sampleData = [
                { period: "Jan 2025", mrr: 45000, newCustomers: 12, churn: 2, expenses: 38000, cash: 520000 },
                { period: "Feb 2025", mrr: 52000, newCustomers: 15, churn: 3, expenses: 39000, cash: 495000 },
                { period: "Mar 2025", mrr: 58000, newCustomers: 18, churn: 2, expenses: 41000, cash: 471000 },
                { period: "Apr 2025", mrr: 62000, newCustomers: 14, churn: 4, expenses: 42000, cash: 449000 },
                { period: "May 2025", mrr: 67000, newCustomers: 16, churn: 5, expenses: 43000, cash: 430000 },
                { period: "Jun 2025", mrr: 70000, newCustomers: 13, churn: 6, expenses: 44000, cash: 413000 },
                { period: "Jul 2025", mrr: 72000, newCustomers: 11, churn: 7, expenses: 45000, cash: 395000 },
                { period: "Aug 2025", mrr: 73000, newCustomers: 9, churn: 8, expenses: 46000, cash: 376000 }
            ];

            if (metricsData.length === 0) {
                metricsData = sampleData;
                updateDashboard();
            }
        }

        function formatCurrency(value) {
            return new Intl.NumberFormat('en-US', { 
                style: 'currency', 
                currency: 'USD', 
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(value);
        }

        function calculateKPIs() {
            if (metricsData.length === 0) return null;

            const totalMRR = metricsData[metricsData.length - 1].mrr;
            const avgBurn = metricsData.reduce((sum, m) => sum + m.expenses, 0) / metricsData.length;
            const currentCash = metricsData[metricsData.length - 1].cash;
            const runway = avgBurn > 0 ? currentCash / avgBurn : Infinity;

            const totalNewCustomers = metricsData.reduce((sum, m) => sum + m.newCustomers, 0);
            const totalChurn = metricsData.reduce((sum, m) => sum + m.churn, 0);
            const netCustomerGrowth = totalNewCustomers - totalChurn;
            const growthRate = totalNewCustomers > 0 ? (netCustomerGrowth / totalNewCustomers * 100) : 0;

            const totalExpenses = metricsData.reduce((sum, m) => sum + m.expenses, 0);
            const cac = totalNewCustomers > 0 ? totalExpenses / totalNewCustomers : 0;

            const avgChurn = totalChurn / metricsData.length;
            const avgNewCustomers = totalNewCustomers / metricsData.length;
            const churnRate = avgNewCustomers > 0 ? (avgChurn / avgNewCustomers * 100) : 0;

            const recentMRR = metricsData.slice(-3).map(m => m.mrr);
            const mrrTrend = recentMRR.length >= 2 ? 
                ((recentMRR[recentMRR.length - 1] - recentMRR[0]) / recentMRR[0] * 100) : 0;

            return {
                totalMRR,
                avgBurn,
                runway,
                growthRate,
                cac,
                churnRate,
                mrrTrend,
                currentCash,
                netCustomerGrowth
            };
        }

        function generateAlerts(kpis) {
            const alerts = [];

            if (kpis.runway < 6) {
                alerts.push({
                    type: 'danger',
                    message: 'Critical: Runway is only ' + kpis.runway.toFixed(1) + ' months. Immediate action required to reduce burn or raise capital.'
                });
            } else if (kpis.runway < 12) {
                alerts.push({
                    type: 'warning',
                    message: 'Warning: Runway is ' + kpis.runway.toFixed(1) + ' months. Consider fundraising or accelerating revenue growth.'
                });
            } else {
                alerts.push({
                    type: 'success',
                    message: 'Healthy: Runway is ' + kpis.runway.toFixed(1) + ' months. Financial position is stable.'
                });
            }

            if (kpis.churnRate > 15) {
                alerts.push({
                    type: 'danger',
                    message: 'High churn rate at ' + kpis.churnRate.toFixed(1) + '%. Focus on customer retention and product improvements immediately.'
                });
            } else if (kpis.churnRate > 8) {
                alerts.push({
                    type: 'warning',
                    message: 'Churn rate at ' + kpis.churnRate.toFixed(1) + '% is concerning. Investigate customer satisfaction and address pain points.'
                });
            }

            if (kpis.growthRate < 0) {
                alerts.push({
                    type: 'danger',
                    message: 'Negative customer growth (' + kpis.growthRate.toFixed(1) + '%). Churn exceeds acquisition - pivot strategy needed.'
                });
            } else if (kpis.growthRate < 20) {
                alerts.push({
                    type: 'warning',
                    message: 'Slow growth at ' + kpis.growthRate.toFixed(1) + '%. Consider investing more in customer acquisition channels.'
                });
            } else {
                alerts.push({
                    type: 'success',
                    message: 'Strong growth at ' + kpis.growthRate.toFixed(1) + '%. Maintain momentum and optimize unit economics.'
                });
            }

            const mrrPerCustomer = metricsData.length > 0 ? kpis.totalMRR / (metricsData.reduce((sum, m) => sum + m.newCustomers, 0) / metricsData.length) : 0;
            const ltv = mrrPerCustomer * 12 * 3;
            const ltvCacRatio = kpis.cac > 0 ? ltv / kpis.cac : 0;

            if (ltvCacRatio < 3 && ltvCacRatio > 0) {
                alerts.push({
                    type: 'warning',
                    message: 'LTV:CAC ratio is ' + ltvCacRatio.toFixed(1) + ':1. Target 3:1 or higher for sustainable growth.'
                });
            }

            return alerts;
        }

        function updateCharts() {
            if (metricsData.length === 0) return;

            const labels = metricsData.map(m => m.period);
            const mrrData = metricsData.map(m => m.mrr);
            const cashData = metricsData.map(m => m.cash);
            const expensesData = metricsData.map(m => m.expenses);
            const newCustomersData = metricsData.map(m => m.newCustomers);
            const churnData = metricsData.map(m => m.churn);

            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            
            if (revenueChart) {
                revenueChart.destroy();
            }

            revenueChart = new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'MRR',
                            data: mrrData,
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 3,
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Cash Balance',
                            data: cashData,
                            borderColor: '#6366f1',
                            backgroundColor: 'rgba(99, 102, 241, 0.1)',
                            borderWidth: 3,
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Operating Expenses',
                            data: expensesData,
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            borderWidth: 3,
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            const customerCtx = document.getElementById('customerChart').getContext('2d');
            
            if (customerChart) {
                customerChart.destroy();
            }

            customerChart = new Chart(customerCtx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'New Customers',
                            data: newCustomersData,
                            backgroundColor: 'rgba(16, 185, 129, 0.8)',
                            borderColor: '#10b981',
                            borderWidth: 2
                        },
                        {
                            label: 'Churn',
                            data: churnData,
                            backgroundColor: 'rgba(239, 68, 68, 0.8)',
                            borderColor: '#ef4444',
                            borderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function updateDashboard() {
            const kpis = calculateKPIs();

            if (!kpis) {
                document.getElementById('totalMRR').textContent = '$0';
                document.getElementById('avgBurn').textContent = '$0';
                document.getElementById('runway').textContent = '0 mo';
                document.getElementById('customerGrowth').textContent = '0%';
                document.getElementById('cac').textContent = '$0';
                document.getElementById('churnRate').textContent = '0%';
                document.getElementById('alertsContainer').innerHTML = '<div class="alert-item alert-warning">Add data entries to see insights</div>';
                return;
            }

            document.getElementById('totalMRR').textContent = formatCurrency(kpis.totalMRR);
            document.getElementById('avgBurn').textContent = formatCurrency(kpis.avgBurn);
            document.getElementById('runway').textContent = kpis.runway.toFixed(1) + ' mo';
            document.getElementById('customerGrowth').textContent = kpis.growthRate.toFixed(1) + '%';
            document.getElementById('cac').textContent = formatCurrency(kpis.cac);
            document.getElementById('churnRate').textContent = kpis.churnRate.toFixed(1) + '%';

            const mrrTrendEl = document.getElementById('mrrTrend');
            mrrTrendEl.className = 'kpi-trend ' + (kpis.mrrTrend > 0 ? 'trend-up' : 'trend-down');
            mrrTrendEl.textContent = (kpis.mrrTrend > 0 ? '↑' : '↓') + ' ' + Math.abs(kpis.mrrTrend).toFixed(1) + '% trend';

            const burnTrendEl = document.getElementById('burnTrend');
            burnTrendEl.textContent = 'Monthly operating cost';

            const runwayHealthEl = document.getElementById('runwayHealth');
            let runwayClass = 'health-good';
            let runwayText = 'Healthy position';
            if (kpis.runway < 6) {
                runwayClass = 'health-danger';
                runwayText = 'Critical - act now';
            } else if (kpis.runway < 12) {
                runwayClass = 'health-warning';
                runwayText = 'Monitor closely';
            }
            runwayHealthEl.className = 'kpi-trend ' + runwayClass;
            runwayHealthEl.textContent = runwayText;

            const growthTrendEl = document.getElementById('growthTrend');
            growthTrendEl.className = 'kpi-trend ' + (kpis.growthRate > 0 ? 'trend-up' : 'trend-down');
            growthTrendEl.textContent = (kpis.netCustomerGrowth > 0 ? '+' : '') + kpis.netCustomerGrowth + ' net customers';

            const churnHealthEl = document.getElementById('churnHealth');
            let churnClass = 'health-good';
            if (kpis.churnRate > 15) churnClass = 'health-danger';
            else if (kpis.churnRate > 8) churnClass = 'health-warning';
            churnHealthEl.className = 'kpi-trend ' + churnClass;
            churnHealthEl.textContent = kpis.churnRate > 10 ? 'Needs attention' : 'Acceptable range';

            const alerts = generateAlerts(kpis);
            const alertsContainer = document.getElementById('alertsContainer');
            alertsContainer.innerHTML = alerts.map(alert => 
                '<div class="alert-item alert-' + alert.type + '">' + alert.message + '</div>'
            ).join('');

            updateTable();
            updateCharts();
        }

        function updateTable() {
            const tbody = document.getElementById('tableBody');
            
            if (metricsData.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7"><div class="empty-state"><div class="empty-state-icon">📊</div><div class="empty-state-text">No data available yet</div><div class="empty-state-subtext">Add your first monthly entry to get started</div></div></td></tr>';
                return;
            }

            tbody.innerHTML = metricsData.map((entry, index) => 
                '<tr><td><strong>' + entry.period + '</strong></td><td>' + formatCurrency(entry.mrr) + '</td><td>' + entry.newCustomers + '</td><td>' + entry.churn + '</td><td>' + formatCurrency(entry.expenses) + '</td><td>' + formatCurrency(entry.cash) + '</td><td><button class="delete-btn" onclick="deleteEntry(' + index + ')">Delete</button></td></tr>'
            ).join('');
        }

        function deleteEntry(index) {
            if (confirm('Are you sure you want to delete this entry?')) {
                metricsData.splice(index, 1);
                updateDashboard();
            }
        }

        function showSuccessMessage() {
            const successMsg = document.getElementById('successMessage');
            successMsg.classList.add('show');
            setTimeout(function() {
                successMsg.classList.remove('show');
            }, 3000);
        }

        document.getElementById('metricsForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const newEntry = {
                period: document.getElementById('period').value.trim(),
                mrr: parseFloat(document.getElementById('mrr').value),
                newCustomers: parseInt(document.getElementById('newCustomers').value),
                churn: parseInt(document.getElementById('churn').value),
                expenses: parseFloat(document.getElementById('expenses').value),
                cash: parseFloat(document.getElementById('cash').value)
            };

            metricsData.push(newEntry);
            updateDashboard();
            showSuccessMessage();

            this.reset();
            document.getElementById('period').focus();
        });

        initializeSampleData();
    </script>
</body>
</html>